<Window x:Class="ChemGateBuilder.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ChemGateBuilder"
        xmlns:fluent="urn:fluent-ribbon"
        mc:Ignorable="d"
        Title="Chem Gate Builder" Height="820" Width="1120"
        MinWidth="1120" MinHeight="820">
    <Window.Resources>
        <DataTemplate x:Key="SectorTemplate">
            <StackPanel Orientation="Horizontal" Margin="0">
                <TextBlock Text="{Binding Name}" Margin="0" Width="200"/>
                <TextBlock Text="{Binding Source}" Margin="0" Foreground="Gray" />
            </StackPanel>
        </DataTemplate>
        <Style TargetType="ComboBoxItem">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Selectable}" Value="False">
                    <Setter Property="Foreground" Value="Gray"/>
                    <Setter Property="IsEnabled" Value="False"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <DockPanel>
        <fluent:Ribbon DockPanel.Dock="Top">
            <fluent:RibbonTabItem Header="Mod">
                <fluent:RibbonGroupBox Header="Mod Actions">
                    <fluent:Button Header="New" />
                    <fluent:Button Header="Load" />
                    <fluent:Button Header="Save" />
                    <fluent:Button Header="Exit" />
                </fluent:RibbonGroupBox>
            </fluent:RibbonTabItem>
            <fluent:RibbonTabItem Header="X4 Data">
                <fluent:RibbonGroupBox Header="X4 Data Actions">
                    <fluent:Button Header="Load" />
                </fluent:RibbonGroupBox>
            </fluent:RibbonTabItem>
            <fluent:RibbonTabItem Header="Options">
                <fluent:RibbonGroupBox Header="Edit Options">
                    <StackPanel>
                        <CheckBox Content="Default Gate Active" Margin="5" IsChecked="{Binding GatesActiveByDefault}"/>
                        <StackPanel Orientation="Horizontal" Margin="5">
                            <Label Content="Minimal Distance Between Gates:" VerticalAlignment="Center"/>
                            <TextBox Width="100" Margin="5" Text="{Binding GatesMinimalDistanceBetween}"/>
                        </StackPanel>
                    </StackPanel>
                </fluent:RibbonGroupBox>
                <fluent:RibbonGroupBox Header="X4 Data Options">
                    <StackPanel Orientation="Vertical" Margin="0">
                         <StackPanel Orientation="Horizontal" Margin="5">
                            <Label Content="X4 Data Extracted" Margin="5"/>
                            <Button Content="Select" Click="SelectX4DataFolder_Click" Margin="5"/>
                        </StackPanel>
                        <TextBlock Text="{Binding X4DataFolderStatus}" Width="200" Margin="5" ToolTip="{Binding X4DataFolderStatus}"/>
                    </StackPanel>
                </fluent:RibbonGroupBox>
                <fluent:RibbonGroupBox Header="Logging Options">
                    <StackPanel>
                        <ComboBox
                            x:Name="LoggingLevelComboBox"
                            Margin="5"
                            SelectedValuePath="Content"
                            SelectedValue="{Binding LogLevel, Mode=TwoWay}">
                            <ComboBoxItem Content="Error"/>
                            <ComboBoxItem Content="Warning"/>
                            <ComboBoxItem Content="Info"/>
                            <ComboBoxItem Content="Debug"/>
                        </ComboBox>
                        <CheckBox Content="Enable Writing to File" Margin="5" IsChecked="{Binding LogToFile}"/>
                    </StackPanel>
                </fluent:RibbonGroupBox>
            </fluent:RibbonTabItem>
            <fluent:RibbonTabItem Header="Help">
                <fluent:RibbonGroupBox Header="Help Actions">
                    <fluent:Button Header="About" />
                </fluent:RibbonGroupBox>
            </fluent:RibbonTabItem>
        </fluent:Ribbon>
        <DockPanel LastChildFill="True">
            <!-- StatusBar Docked to Bottom -->
            <StatusBar DockPanel.Dock="Bottom">
                <StatusBarItem>
                    <TextBlock Text="{Binding StatusMessage}" />
                </StatusBarItem>
            </StatusBar>
            <GroupBox Header="Chem Gate Builder" DockPanel.Dock="Top" Margin="5">
                <DockPanel  VerticalAlignment="Stretch" LastChildFill="True">
                    <GroupBox Header="Gates" Margin="5" DockPanel.Dock="Bottom">
                        <StackPanel Orientation="Vertical" Margin="5">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <GroupBox Header="Gate Direct" Grid.Column="0" Margin="5">
                                <StackPanel>
                                    <Grid Margin="5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Label Content="Sector:" Grid.Column="0" VerticalAlignment="Center"/>
                                        <!-- Sector Direct ComboBox -->
                                        <ComboBox
                                            x:Name="SectorDirectComboBox"
                                            Grid.Column="1"
                                            Margin="5"
                                            ItemsSource="{Binding SectorsDirectViewSource.View}"
                                            SelectedItem="{Binding GatesConnectionCurrent.SectorDirect, Mode=TwoWay}"
                                            SelectedValuePath="Macro"
                                            ItemTemplate="{StaticResource SectorTemplate}" />
                                    </Grid>
                                    <GroupBox Header="Sector Info" Margin="5">
                                        <DockPanel>
                                            <Image DockPanel.Dock="Left" Width="100" Height="100" Margin="5"/>
                                            <DataGrid ItemsSource="{Binding GatesConnectionCurrent.SectorDirectConnections}"
                                                      AutoGenerateColumns="False"
                                                      Margin="5"
                                                      CanUserAddRows="False">
                                                <DataGrid.Columns>
                                                    <DataGridTextColumn Header="To Sector" Binding="{Binding ToSector}" Width="*"/>
                                                    <DataGridTextColumn Header="X" Binding="{Binding X}" Width="*"/>
                                                    <DataGridTextColumn Header="Y" Binding="{Binding Y}" Width="*"/>
                                                    <DataGridTextColumn Header="Z" Binding="{Binding Z}" Width="*"/>
                                                    <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="*"/>
                                                    <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="*"/>
                                                </DataGrid.Columns>
                                            </DataGrid>
                                        </DockPanel>
                                    </GroupBox>
                                    <GroupBox Header="Gate Parameters" Margin="5">
                                        <StackPanel>
                                            <Grid Margin="5">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <Label Content="Gate Coordinates (km):" Grid.Column="0" VerticalAlignment="Center"/>
                                                <Grid Grid.Column="1">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Label Content="X:" Grid.Column="0" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="1" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-400"
                                                            local:TextBoxExtensions.MaxValue="400"
                                                            Text="{Binding GatesConnectionCurrent.GateDirect.Coordinates.X, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    <Label Content="Y:" Grid.Column="2" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="3" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-400"
                                                            local:TextBoxExtensions.MaxValue="400"
                                                            Text="{Binding GatesConnectionCurrent.GateDirect.Coordinates.Y, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    <Label Content="Z:" Grid.Column="4" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="5" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-400"
                                                            local:TextBoxExtensions.MaxValue="400"
                                                            Text="{Binding GatesConnectionCurrent.GateDirect.Coordinates.Z, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                </Grid>
                                            </Grid>
                                            <Grid Margin="5">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <Label Content="Gate Position (m):" Grid.Column="0" VerticalAlignment="Center"/>
                                                <Grid Grid.Column="1">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Label Content="X:" Grid.Column="0" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="1" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-999"
                                                            local:TextBoxExtensions.MaxValue="999"
                                                            Text="{Binding GatesConnectionCurrent.GateDirect.Position.X, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    <Label Content="Y:" Grid.Column="2" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="3" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-999"
                                                            local:TextBoxExtensions.MaxValue="999"
                                                            Text="{Binding GatesConnectionCurrent.GateDirect.Position.Y, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    <Label Content="Z:" Grid.Column="4" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="5" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-999"

                                                            Text="{Binding GatesConnectionCurrent.GateDirect.Position.Z, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                </Grid>
                                            </Grid>
                                            <Grid Margin="5">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <Label Content="Gate Rotation (°):" Grid.Column="0" VerticalAlignment="Center"/>
                                                <Grid Grid.Column="1">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Label Content="Roll:" Grid.Column="0" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="1" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-180"
                                                            local:TextBoxExtensions.MaxValue="180"
                                                            Text="{Binding GatesConnectionCurrent.GateDirect.Rotation.Roll, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    <Label Content="Pitch:" Grid.Column="2" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="3" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-180"
                                                            local:TextBoxExtensions.MaxValue="180"
                                                            Text="{Binding GatesConnectionCurrent.GateDirect.Rotation.Pitch, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    <Label Content="Yaw:" Grid.Column="4" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="5" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-180"
                                                            local:TextBoxExtensions.MaxValue="180"
                                                            Text="{Binding GatesConnectionCurrent.GateDirect.Rotation.Yaw, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                </Grid>
                                            </Grid>
                                            <Grid Margin="5">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="10"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <CheckBox Content="Active" Grid.Column="0" VerticalAlignment="Center"
                                                        IsChecked="{Binding GatesConnectionCurrent.GateDirect.Active, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                <Label Content="Gate Macro:" Grid.Column="2" VerticalAlignment="Center"/>
                                                <ComboBox HorizontalAlignment="Stretch" MinWidth="100" Margin="5" Grid.Column="3"
                                                    Text="{Binding GatesConnectionCurrent.GateDirect.GateMacro, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                            </Grid>
                                        </StackPanel>
                                    </GroupBox>
                                </StackPanel>
                            </GroupBox>
                            <GroupBox Header="Gate Opposite" Grid.Column="1" Margin="5">
                                <StackPanel>
                                    <Grid Margin="5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Label Content="Sector:" Grid.Column="0" VerticalAlignment="Center"/>
                                        <!-- Sector Opposite ComboBox -->
                                        <ComboBox
                                            x:Name="SectorOppositeComboBox"
                                            Margin="5"
                                            Grid.Column="1"
                                            ItemsSource="{Binding SectorsOppositeViewSource.View}"
                                            SelectedItem="{Binding GatesConnectionCurrent.SectorOpposite, Mode=TwoWay}"
                                            SelectedValuePath="Macro"
                                            ItemTemplate="{StaticResource SectorTemplate}" />
                                    </Grid>
                                    <GroupBox Header="Sector Info" Margin="5">
                                        <DockPanel>
                                            <Image DockPanel.Dock="Left" Width="100" Height="100" Margin="5"/>
                                            <DataGrid ItemsSource="{Binding GatesConnectionCurrent.SectorOppositeConnections}"
                                                      AutoGenerateColumns="False"
                                                      Margin="5"
                                                      CanUserAddRows="False">
                                                <DataGrid.Columns>
                                                    <DataGridTextColumn Header="To Sector" Binding="{Binding ToSector}" Width="*"/>
                                                    <DataGridTextColumn Header="X" Binding="{Binding X}" Width="*"/>
                                                    <DataGridTextColumn Header="Y" Binding="{Binding Y}" Width="*"/>
                                                    <DataGridTextColumn Header="Z" Binding="{Binding Z}" Width="*"/>
                                                    <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="*"/>
                                                    <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="*"/>
                                                </DataGrid.Columns>
                                            </DataGrid>
                                        </DockPanel>
                                    </GroupBox>
                                    <GroupBox Header="Gate Parameters" Margin="5">
                                        <StackPanel>
                                            <Grid Margin="5">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <Label Content="Gate Coordinates (km):" Grid.Column="0" VerticalAlignment="Center"/>
                                                <Grid Grid.Column="1">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Label Content="X:" Grid.Column="0" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="1" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-400"
                                                            local:TextBoxExtensions.MaxValue="400"
                                                            Text="{Binding GatesConnectionCurrent.GateOpposite.Coordinates.X, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    <Label Content="Y:" Grid.Column="2" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="3" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-400"
                                                            local:TextBoxExtensions.MaxValue="400"
                                                            Text="{Binding GatesConnectionCurrent.GateOpposite.Coordinates.Y, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    <Label Content="Z:" Grid.Column="4" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="5" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-400"
                                                            local:TextBoxExtensions.MaxValue="400"
                                                            Text="{Binding GatesConnectionCurrent.GateOpposite.Coordinates.Z, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                </Grid>
                                            </Grid>
                                            <Grid Margin="5">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <Label Content="Gate Position (m):" Grid.Column="0" VerticalAlignment="Center"/>
                                                <Grid Grid.Column="1">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Label Content="X:" Grid.Column="0" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="1" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-999"
                                                            local:TextBoxExtensions.MaxValue="999"
                                                            Text="{Binding GatesConnectionCurrent.GateOpposite.Position.X, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    <Label Content="Y:" Grid.Column="2" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="3" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-999"
                                                            local:TextBoxExtensions.MaxValue="999"
                                                            Text="{Binding GatesConnectionCurrent.GateOpposite.Position.Y, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    <Label Content="Z:" Grid.Column="4" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="5" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-999"
                                                            local:TextBoxExtensions.MaxValue="999"
                                                            Text="{Binding GatesConnectionCurrent.GateOpposite.Position.Z, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                </Grid>
                                            </Grid>
                                            <Grid Margin="5">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <Label Content="Gate Rotation (°):" Grid.Column="0" VerticalAlignment="Center"/>
                                                <Grid Grid.Column="1">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Label Content="Roll:" Grid.Column="0" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="1" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-180"
                                                            local:TextBoxExtensions.MaxValue="180"
                                                            Text="{Binding GatesConnectionCurrent.GateOpposite.Rotation.Roll, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    <Label Content="Pitch:" Grid.Column="2" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="3" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-180"
                                                            local:TextBoxExtensions.MaxValue="180"
                                                            Text="{Binding GatesConnectionCurrent.GateOpposite.Rotation.Pitch, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    <Label Content="Yaw:" Grid.Column="4" VerticalAlignment="Center"/>
                                                    <TextBox Grid.Column="5" Margin="5" HorizontalAlignment="Stretch" MinWidth="40"
                                                            local:TextBoxExtensions.IsIntegerOnly="True"
                                                            local:TextBoxExtensions.MinValue="-180"
                                                            local:TextBoxExtensions.MaxValue="180"
                                                            Text="{Binding GatesConnectionCurrent.GateOpposite.Rotation.Yaw, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                </Grid>
                                            </Grid>
                                            <Grid Margin="5">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="10"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <CheckBox Content="Active" Grid.Column="0" VerticalAlignment="Center"
                                                        IsChecked="{Binding GatesConnectionCurrent.GateOpposite.Active, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                <Label Content="Gate Macro:" Grid.Column="2" VerticalAlignment="Center"/>
                                                <ComboBox HorizontalAlignment="Stretch" MinWidth="100" Margin="5" Grid.Column="3"
                                                    Text="{Binding GatesConnectionCurrent.GateOpposite.GateMacro, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                            </Grid>
                                        </StackPanel>
                                    </GroupBox>
                                </StackPanel>
                            </GroupBox>
                        </Grid>
                        <StackPanel Orientation="Horizontal" Margin="0" HorizontalAlignment="Right">
                            <Button Content="Reset" Margin="0,0,5,0" Width="100"/>
                            <Button Content="Add" Margin="5,0,0,0" Width="100"/>
                        </StackPanel>
                        </StackPanel>
                    </GroupBox>
                    <GroupBox Header="Gate Connections" DockPanel.Dock="Top" Margin="5" MinHeight="125" VerticalAlignment="Stretch">
                        <Grid Margin="5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="120" />
                            </Grid.ColumnDefinitions>
                            <DataGrid Grid.Column="0" Margin="5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" AutoGenerateColumns="False">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="From Sector" Width="*"/>
                                    <DataGridTextColumn Header="X,km" Width="*"/>
                                    <DataGridTextColumn Header="Y,km" Width="*"/>
                                    <DataGridTextColumn Header="Z,km" Width="*"/>
                                    <DataGridTextColumn Header="Active" Width="*"/>
                                    <DataGridTextColumn Header="To Sector" Width="*"/>
                                    <DataGridTextColumn Header="X,km" Width="*"/>
                                    <DataGridTextColumn Header="Y,km" Width="*"/>
                                    <DataGridTextColumn Header="Z,km" Width="*"/>
                                    <DataGridTextColumn Header="Active" Width="*"/>
                                </DataGrid.Columns>
                            </DataGrid>
                            <StackPanel Orientation="Vertical" Grid.Column="1" Margin="5">
                                <Button Content="New Gate" Margin="0,0,0,5" Width="100" />
                                <Button Content="Delete Gate" Margin="0,5,0,0" Width="100" />
                            </StackPanel>
                        </Grid>
                    </GroupBox>
                </DockPanel>
            </GroupBox>
        </DockPanel>
    </DockPanel>
</Window>
